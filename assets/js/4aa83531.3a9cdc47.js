(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{111:function(e,t,n){"use strict";n.d(t,"a",(function(){return p})),n.d(t,"b",(function(){return m}));var a=n(0),r=n.n(a);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var s=r.a.createContext({}),b=function(e){var t=r.a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},p=function(e){var t=b(e.components);return r.a.createElement(s.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return r.a.createElement(r.a.Fragment,{},t)}},h=r.a.forwardRef((function(e,t){var n=e.components,a=e.mdxType,o=e.originalType,i=e.parentName,s=c(e,["components","mdxType","originalType","parentName"]),p=b(n),h=a,m=p["".concat(i,".").concat(h)]||p[h]||d[h]||o;return n?r.a.createElement(m,l(l({ref:t},s),{},{components:n})):r.a.createElement(m,l({ref:t},s))}));function m(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var o=n.length,i=new Array(o);i[0]=h;var l={};for(var c in t)hasOwnProperty.call(t,c)&&(l[c]=t[c]);l.originalType=e,l.mdxType="string"==typeof e?e:a,i[1]=l;for(var s=2;s<o;s++)i[s]=n[s];return r.a.createElement.apply(null,i)}return r.a.createElement.apply(null,n)}h.displayName="MDXCreateElement"},80:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return i})),n.d(t,"metadata",(function(){return l})),n.d(t,"toc",(function(){return c})),n.d(t,"default",(function(){return b}));var a=n(3),r=n(7),o=(n(0),n(111)),i={},l={unversionedId:"developers/contracts/SwapFlashLoan",id:"developers/contracts/SwapFlashLoan",isDocsHomePage:!1,title:"SwapFlashLoan",description:"This contract is responsible for custody of closely pegged assets (eg. group of stablecoins)",source:"@site/docs/developers/contracts/SwapFlashLoan.md",sourceDirName:"developers/contracts",slug:"/developers/contracts/SwapFlashLoan",permalink:"/gondola-doc/docs/developers/contracts/SwapFlashLoan",editUrl:"https://github.com/gondola-finance/gondola-doc/tree/master/docs/developers/contracts/SwapFlashLoan.md",version:"current",frontMatter:{},sidebar:"developers",previous:{title:"SwapDeployer",permalink:"/gondola-doc/docs/developers/contracts/SwapDeployer"},next:{title:"SwapUtils",permalink:"/gondola-doc/docs/developers/contracts/SwapUtils"}},c=[{value:"Functions",id:"functions",children:[{value:"initialize",id:"initialize",children:[]},{value:"flashLoan",id:"flashloan",children:[]},{value:"setFlashLoanFees",id:"setflashloanfees",children:[]}]},{value:"Events",id:"events",children:[{value:"FlashLoan",id:"flashloan-1",children:[]}]}],s={toc:c};function b(e){var t=e.components,n=Object(r.a)(e,["components"]);return Object(o.b)("wrapper",Object(a.a)({},s,n,{components:t,mdxType:"MDXLayout"}),Object(o.b)("p",null,"This contract is responsible for custody of closely pegged assets (eg. group of stablecoins)\nand automatic market making system. Users become an LP (Liquidity Provider) by depositing their tokens\nin desired ratios for an exchange of the pool token that represents their share of the pool.\nUsers can burn pool tokens and withdraw their share of token(s)."),Object(o.b)("p",null,"Each time a swap between the pooled tokens happens, a set fee incurs which effectively gets\ndistributed to the LPs."),Object(o.b)("p",null,"In case of emergencies, admin can pause additional deposits, swaps, or single-asset withdraws - which\nstops the ratio of the tokens in the pool from changing.\nUsers can always withdraw their tokens via multi-asset withdraws."),Object(o.b)("p",null,"Most of the logic is stored as a library ",Object(o.b)("inlineCode",{parentName:"p"},"SwapUtils")," for the sake of reducing contract's\ndeployment size."),Object(o.b)("h2",{id:"functions"},"Functions"),Object(o.b)("h3",{id:"initialize"},"initialize"),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre",className:"language-solidity"},"  function initialize(\n    contract IERC20[] _pooledTokens,\n    uint8[] decimals,\n    string lpTokenName,\n    string lpTokenSymbol,\n    uint256 _a,\n    uint256 _fee,\n    uint256 _adminFee,\n    uint256 _withdrawFee\n  ) public\n")),Object(o.b)("p",null,"Initializes this Swap contract with the given parameters.\nThis will also deploy the LPToken that represents users\nLP position. The owner of LPToken will be this contract - which means\nonly this contract is allowed to mint new tokens."),Object(o.b)("h4",{id:"parameters"},"Parameters:"),Object(o.b)("table",null,Object(o.b)("thead",{parentName:"table"},Object(o.b)("tr",{parentName:"thead"},Object(o.b)("th",{parentName:"tr",align:"left"},"Name"),Object(o.b)("th",{parentName:"tr",align:"left"},"Type"),Object(o.b)("th",{parentName:"tr",align:"left"},"Description"))),Object(o.b)("tbody",{parentName:"table"},Object(o.b)("tr",{parentName:"tbody"},Object(o.b)("td",{parentName:"tr",align:"left"},Object(o.b)("inlineCode",{parentName:"td"},"_pooledTokens")),Object(o.b)("td",{parentName:"tr",align:"left"},"contract IERC20[]"),Object(o.b)("td",{parentName:"tr",align:"left"},"an array of ERC20s this pool will accept")),Object(o.b)("tr",{parentName:"tbody"},Object(o.b)("td",{parentName:"tr",align:"left"},Object(o.b)("inlineCode",{parentName:"td"},"decimals")),Object(o.b)("td",{parentName:"tr",align:"left"},"uint8[]"),Object(o.b)("td",{parentName:"tr",align:"left"},"the decimals to use for each pooled token,")))),Object(o.b)("p",null,"eg 8 for WBTC. Cannot be larger than POOL_PRECISION_DECIMALS\n|",Object(o.b)("inlineCode",{parentName:"p"},"lpTokenName")," | string | the long-form name of the token to be deployed\n|",Object(o.b)("inlineCode",{parentName:"p"},"lpTokenSymbol")," | string | the short symbol for the token to be deployed\n|",Object(o.b)("inlineCode",{parentName:"p"},"_a")," | uint256 | the amplification coefficient ",Object(o.b)("em",{parentName:"p"}," n ")," (n - 1). See the\nStableSwap paper for details\n|",Object(o.b)("inlineCode",{parentName:"p"},"_fee")," | uint256 | default swap fee to be initialized with\n|",Object(o.b)("inlineCode",{parentName:"p"},"_adminFee")," | uint256 | default adminFee to be initialized with\n|",Object(o.b)("inlineCode",{parentName:"p"},"_withdrawFee")," | uint256 | default withdrawFee to be initialized with"),Object(o.b)("h3",{id:"flashloan"},"flashLoan"),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre",className:"language-solidity"},"  function flashLoan(\n    address receiver,\n    contract IERC20 token,\n    uint256 amount,\n    bytes params\n  ) external\n")),Object(o.b)("p",null,"Borrow the specified token from this pool for this transaction only. This function will call\n",Object(o.b)("inlineCode",{parentName:"p"},"IFlashLoanReceiver(receiver).executeOperation")," and the ",Object(o.b)("inlineCode",{parentName:"p"},"receiver")," must return the full amount of the token\nand the associated fee by the end of the callback transaction. If the conditions are not met, this call\nis reverted."),Object(o.b)("h4",{id:"parameters-1"},"Parameters:"),Object(o.b)("table",null,Object(o.b)("thead",{parentName:"table"},Object(o.b)("tr",{parentName:"thead"},Object(o.b)("th",{parentName:"tr",align:"left"},"Name"),Object(o.b)("th",{parentName:"tr",align:"left"},"Type"),Object(o.b)("th",{parentName:"tr",align:"left"},"Description"))),Object(o.b)("tbody",{parentName:"table"},Object(o.b)("tr",{parentName:"tbody"},Object(o.b)("td",{parentName:"tr",align:"left"},Object(o.b)("inlineCode",{parentName:"td"},"receiver")),Object(o.b)("td",{parentName:"tr",align:"left"},"address"),Object(o.b)("td",{parentName:"tr",align:"left"},"the address of the receiver of the token. This address must implement the IFlashLoanReceiver")))),Object(o.b)("p",null,"interface and the callback function ",Object(o.b)("inlineCode",{parentName:"p"},"executeOperation"),".\n|",Object(o.b)("inlineCode",{parentName:"p"},"token")," | contract IERC20 | the protocol fee in bps to be applied on the total flash loan fee\n|",Object(o.b)("inlineCode",{parentName:"p"},"amount")," | uint256 | the total amount to borrow in this transaction\n|",Object(o.b)("inlineCode",{parentName:"p"},"params")," | bytes | optional data to pass along to the callback function"),Object(o.b)("h3",{id:"setflashloanfees"},"setFlashLoanFees"),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre",className:"language-solidity"},"  function setFlashLoanFees(\n    uint256 newFlashLoanFeeBPS,\n    uint256 newProtocolFeeShareBPS\n  ) external\n")),Object(o.b)("p",null,"Updates the flash loan fee parameters. This function can only be called by the owner."),Object(o.b)("h4",{id:"parameters-2"},"Parameters:"),Object(o.b)("table",null,Object(o.b)("thead",{parentName:"table"},Object(o.b)("tr",{parentName:"thead"},Object(o.b)("th",{parentName:"tr",align:"left"},"Name"),Object(o.b)("th",{parentName:"tr",align:"left"},"Type"),Object(o.b)("th",{parentName:"tr",align:"left"},"Description"))),Object(o.b)("tbody",{parentName:"table"},Object(o.b)("tr",{parentName:"tbody"},Object(o.b)("td",{parentName:"tr",align:"left"},Object(o.b)("inlineCode",{parentName:"td"},"newFlashLoanFeeBPS")),Object(o.b)("td",{parentName:"tr",align:"left"},"uint256"),Object(o.b)("td",{parentName:"tr",align:"left"},"the total fee in bps to be applied on future flash loans")),Object(o.b)("tr",{parentName:"tbody"},Object(o.b)("td",{parentName:"tr",align:"left"},Object(o.b)("inlineCode",{parentName:"td"},"newProtocolFeeShareBPS")),Object(o.b)("td",{parentName:"tr",align:"left"},"uint256"),Object(o.b)("td",{parentName:"tr",align:"left"},"the protocol fee in bps to be applied on the total flash loan fee")))),Object(o.b)("h2",{id:"events"},"Events"),Object(o.b)("h3",{id:"flashloan-1"},"FlashLoan"),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre",className:"language-solidity"},"  event FlashLoan(\n  )\n")))}b.isMDXComponent=!0}}]);