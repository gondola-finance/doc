<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.74">
<link rel="alternate" type="application/rss+xml" href="/doc/blog/rss.xml" title="Gondola Finance Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/doc/blog/atom.xml" title="Gondola Finance Blog Atom Feed"><title data-react-helmet="true">SwapFlashLoan | Gondola Finance</title><meta data-react-helmet="true" property="og:url" content="https://gondola-finance.github.io//doc/docs/developers/contracts/SwapFlashLoan"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="SwapFlashLoan | Gondola Finance"><meta data-react-helmet="true" name="description" content="This contract is responsible for custody of closely pegged assets (eg. group of stablecoins)"><meta data-react-helmet="true" property="og:description" content="This contract is responsible for custody of closely pegged assets (eg. group of stablecoins)"><link data-react-helmet="true" rel="shortcut icon" href="/doc/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://gondola-finance.github.io//doc/docs/developers/contracts/SwapFlashLoan"><link data-react-helmet="true" rel="alternate" href="https://gondola-finance.github.io//doc/docs/developers/contracts/SwapFlashLoan" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://gondola-finance.github.io//doc/docs/developers/contracts/SwapFlashLoan" hreflang="x-default"><link rel="stylesheet" href="/doc/assets/css/styles.cb95ebef.css">
<link rel="preload" href="/doc/assets/js/styles.4985c453.js" as="script">
<link rel="preload" href="/doc/assets/js/runtime~main.0c3475d4.js" as="script">
<link rel="preload" href="/doc/assets/js/main.5920ba74.js" as="script">
<link rel="preload" href="/doc/assets/js/1.7e29f67b.js" as="script">
<link rel="preload" href="/doc/assets/js/2.17ed34d2.js" as="script">
<link rel="preload" href="/doc/assets/js/3.cdc41e80.js" as="script">
<link rel="preload" href="/doc/assets/js/1be78505.d48b4863.js" as="script">
<link rel="preload" href="/doc/assets/js/41.1e1a38c9.js" as="script">
<link rel="preload" href="/doc/assets/js/935f2afb.9ff0a8fe.js" as="script">
<link rel="preload" href="/doc/assets/js/17896441.2dcc6183.js" as="script">
<link rel="preload" href="/doc/assets/js/4aa83531.206366a2.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#main" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle" type="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/doc/"><img src="/doc/img/logo.webp" alt="Gondola.finance Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/doc/img/logo.webp" alt="Gondola.finance Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><strong class="navbar__title">Gondola Finance</strong></a><a class="navbar__item navbar__link" href="/doc/docs/getting-started/introduction">Getting started</a><a class="navbar__item navbar__link navbar__link--active" href="/doc/docs/developers/introduction">Developers</a></div><div class="navbar__items navbar__items--right"></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/doc/"><img src="/doc/img/logo.webp" alt="Gondola.finance Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/doc/img/logo.webp" alt="Gondola.finance Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><strong class="navbar__title">Gondola Finance</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/doc/docs/getting-started/introduction">Getting started</a></li><li class="menu__list-item"><a class="menu__link navbar__link--active" href="/doc/docs/developers/introduction">Developers</a></li></ul></div></div></div></nav><div class="main-wrapper docs-wrapper doc-page"><div class="docPage_31aa"><div class="docSidebarContainer_3Kbt" role="complementary"><div class="sidebar_15mo"><div class="menu menu--responsive thin-scrollbar menu_Bmed"><button aria-label="Open menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_fgN0" width="24" height="24" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/doc/docs/developers/introduction">Table of contents</a></li><li class="menu__list-item"><a class="menu__link" href="/doc/docs/developers/deployed-contracts">Deployed contracts</a></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Smart Contracts</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/doc/docs/developers/contracts/GondolaToken">GondolaToken</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/doc/docs/developers/contracts/IMigratorChef">IMigratorChef</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/doc/docs/developers/contracts/LPToken">LPToken</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/doc/docs/developers/contracts/MasterChef">MasterChef</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/doc/docs/developers/contracts/MathUtils">MathUtils</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/doc/docs/developers/contracts/OwnerPausableUpgradeable">OwnerPausableUpgradeable</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/doc/docs/developers/contracts/StakeableTokenWrapper">StakeableTokenWrapper</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/doc/docs/developers/contracts/Swap">Swap</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/doc/docs/developers/contracts/SwapDeployer">SwapDeployer</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/doc/docs/developers/contracts/SwapFlashLoan">SwapFlashLoan</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/doc/docs/developers/contracts/SwapUtils">SwapUtils</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/doc/docs/developers/contracts/TimeLock">TimeLock</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">VirtualSwap</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/doc/docs/developers/contracts/VirtualSwap/Bridge">Bridge</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/doc/docs/developers/contracts/VirtualSwap/Proxy">Proxy</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/doc/docs/developers/contracts/VirtualSwap/SynthSwapper">SynthSwapper</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/doc/docs/developers/contracts/VirtualSwap/Target">Target</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">helper</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/doc/docs/developers/contracts/helper/FlashLoanBorrowerExample">FlashLoanBorrowerExample</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/doc/docs/developers/contracts/helper/GenericERC20">GenericERC20</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">test</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/doc/docs/developers/contracts/helper/test/TestSwapReturnValues">TestSwapReturnValues</a></li></ul></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">interfaces</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/doc/docs/developers/contracts/interfaces/IAllowlist">IAllowlist</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/doc/docs/developers/contracts/interfaces/IFlashLoanReceiver">IFlashLoanReceiver</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/doc/docs/developers/contracts/interfaces/ISwap">ISwap</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/doc/docs/developers/contracts/interfaces/ISwapFlashLoan">ISwapFlashLoan</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/doc/docs/developers/contracts/interfaces/ISwapGuarded">ISwapGuarded</a></li></ul></li></ul></li></ul></div></div></div><main class="docMainContainer_3ufF"><div class="container padding-vert--lg docItemWrapper_3FMP"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><header><h1 class="docTitle_3a4h">SwapFlashLoan</h1></header><div class="markdown"><p>This contract is responsible for custody of closely pegged assets (eg. group of stablecoins)
and automatic market making system. Users become an LP (Liquidity Provider) by depositing their tokens
in desired ratios for an exchange of the pool token that represents their share of the pool.
Users can burn pool tokens and withdraw their share of token(s).</p><p>Each time a swap between the pooled tokens happens, a set fee incurs which effectively gets
distributed to the LPs.</p><p>In case of emergencies, admin can pause additional deposits, swaps, or single-asset withdraws - which
stops the ratio of the tokens in the pool from changing.
Users can always withdraw their tokens via multi-asset withdraws.</p><p>Most of the logic is stored as a library <code>SwapUtils</code> for the sake of reducing contract&#x27;s
deployment size.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="functions"></a>Functions<a class="hash-link" href="#functions" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="initialize"></a>initialize<a class="hash-link" href="#initialize" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly solidity"><div tabindex="0" class="prism-code language-solidity codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">  function initialize(</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    contract IERC20[] _pooledTokens,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    uint8[] decimals,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string lpTokenName,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    string lpTokenSymbol,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    uint256 _a,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    uint256 _fee,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    uint256 _adminFee,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    uint256 _withdrawFee</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  ) public</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>Initializes this Swap contract with the given parameters.
This will also deploy the LPToken that represents users
LP position. The owner of LPToken will be this contract - which means
only this contract is allowed to mint new tokens.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="parameters"></a>Parameters:<a class="hash-link" href="#parameters" title="Direct link to heading">#</a></h4><table><thead><tr><th align="left">Name</th><th align="left">Type</th><th align="left">Description</th></tr></thead><tbody><tr><td align="left"><code>_pooledTokens</code></td><td align="left">contract IERC20[]</td><td align="left">an array of ERC20s this pool will accept</td></tr><tr><td align="left"><code>decimals</code></td><td align="left">uint8[]</td><td align="left">the decimals to use for each pooled token,</td></tr></tbody></table><p>eg 8 for WBTC. Cannot be larger than POOL_PRECISION_DECIMALS
|<code>lpTokenName</code> | string | the long-form name of the token to be deployed
|<code>lpTokenSymbol</code> | string | the short symbol for the token to be deployed
|<code>_a</code> | uint256 | the amplification coefficient <em> n </em> (n - 1). See the
StableSwap paper for details
|<code>_fee</code> | uint256 | default swap fee to be initialized with
|<code>_adminFee</code> | uint256 | default adminFee to be initialized with
|<code>_withdrawFee</code> | uint256 | default withdrawFee to be initialized with</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="flashloan"></a>flashLoan<a class="hash-link" href="#flashloan" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly solidity"><div tabindex="0" class="prism-code language-solidity codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">  function flashLoan(</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    address receiver,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    contract IERC20 token,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    uint256 amount,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    bytes params</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  ) external</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>Borrow the specified token from this pool for this transaction only. This function will call
<code>IFlashLoanReceiver(receiver).executeOperation</code> and the <code>receiver</code> must return the full amount of the token
and the associated fee by the end of the callback transaction. If the conditions are not met, this call
is reverted.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="parameters-1"></a>Parameters:<a class="hash-link" href="#parameters-1" title="Direct link to heading">#</a></h4><table><thead><tr><th align="left">Name</th><th align="left">Type</th><th align="left">Description</th></tr></thead><tbody><tr><td align="left"><code>receiver</code></td><td align="left">address</td><td align="left">the address of the receiver of the token. This address must implement the IFlashLoanReceiver</td></tr></tbody></table><p>interface and the callback function <code>executeOperation</code>.
|<code>token</code> | contract IERC20 | the protocol fee in bps to be applied on the total flash loan fee
|<code>amount</code> | uint256 | the total amount to borrow in this transaction
|<code>params</code> | bytes | optional data to pass along to the callback function</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="setflashloanfees"></a>setFlashLoanFees<a class="hash-link" href="#setflashloanfees" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly solidity"><div tabindex="0" class="prism-code language-solidity codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">  function setFlashLoanFees(</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    uint256 newFlashLoanFeeBPS,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    uint256 newProtocolFeeShareBPS</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  ) external</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>Updates the flash loan fee parameters. This function can only be called by the owner.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="parameters-2"></a>Parameters:<a class="hash-link" href="#parameters-2" title="Direct link to heading">#</a></h4><table><thead><tr><th align="left">Name</th><th align="left">Type</th><th align="left">Description</th></tr></thead><tbody><tr><td align="left"><code>newFlashLoanFeeBPS</code></td><td align="left">uint256</td><td align="left">the total fee in bps to be applied on future flash loans</td></tr><tr><td align="left"><code>newProtocolFeeShareBPS</code></td><td align="left">uint256</td><td align="left">the protocol fee in bps to be applied on the total flash loan fee</td></tr></tbody></table><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="events"></a>Events<a class="hash-link" href="#events" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="flashloan-1"></a>FlashLoan<a class="hash-link" href="#flashloan-1" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly solidity"><div tabindex="0" class="prism-code language-solidity codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">  event FlashLoan(</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  )</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/gondola-finance/doc/docs/developers/contracts/SwapFlashLoan.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" role="img" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-label="Edit page"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/doc/docs/developers/contracts/SwapDeployer"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">« SwapDeployer</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/doc/docs/developers/contracts/SwapUtils"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">SwapUtils »</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#functions" class="table-of-contents__link">Functions</a><ul><li><a href="#initialize" class="table-of-contents__link">initialize</a></li><li><a href="#flashloan" class="table-of-contents__link">flashLoan</a></li><li><a href="#setflashloanfees" class="table-of-contents__link">setFlashLoanFees</a></li></ul></li><li><a href="#events" class="table-of-contents__link">Events</a><ul><li><a href="#flashloan-1" class="table-of-contents__link">FlashLoan</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Docs</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/doc/docs/getting-started/introduction">Getting started</a></li><li class="footer__item"><a class="footer__link-item" href="/doc/docs/developers/introduction">Developers</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Community</h4><ul class="footer__items"><li class="footer__item"><a href="https://discord.gg/7yf87Afh" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord</a></li><li class="footer__item"><a href="https://twitter.com/gondola_finance" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">More</h4><ul class="footer__items"><li class="footer__item"><a href="https://gondola.finance" target="_blank" rel="noopener noreferrer" class="footer__link-item">Website</a></li><li class="footer__item"><a href="https://app.gondola.finance" target="_blank" rel="noopener noreferrer" class="footer__link-item">Dapp</a></li><li class="footer__item"><a href="https://gondola-finance.medium.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Medium</a></li><li class="footer__item"><a href="https://github.com/gondola-finance" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2021 Gondola Finance.</div></div></div></footer></div>
<script src="/doc/assets/js/styles.4985c453.js"></script>
<script src="/doc/assets/js/runtime~main.0c3475d4.js"></script>
<script src="/doc/assets/js/main.5920ba74.js"></script>
<script src="/doc/assets/js/1.7e29f67b.js"></script>
<script src="/doc/assets/js/2.17ed34d2.js"></script>
<script src="/doc/assets/js/3.cdc41e80.js"></script>
<script src="/doc/assets/js/1be78505.d48b4863.js"></script>
<script src="/doc/assets/js/41.1e1a38c9.js"></script>
<script src="/doc/assets/js/935f2afb.9ff0a8fe.js"></script>
<script src="/doc/assets/js/17896441.2dcc6183.js"></script>
<script src="/doc/assets/js/4aa83531.206366a2.js"></script>
</body>
</html>