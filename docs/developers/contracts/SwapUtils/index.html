<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.74">
<link rel="alternate" type="application/rss+xml" href="/doc/blog/rss.xml" title="Gondola Finance Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/doc/blog/atom.xml" title="Gondola Finance Blog Atom Feed"><title data-react-helmet="true">SwapUtils | Gondola Finance</title><meta data-react-helmet="true" property="og:url" content="https://gondola-finance.github.io//doc/docs/developers/contracts/SwapUtils"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="SwapUtils | Gondola Finance"><meta data-react-helmet="true" name="description" content="A library to be used within Swap.sol. Contains functions responsible for custody and AMM functionalities."><meta data-react-helmet="true" property="og:description" content="A library to be used within Swap.sol. Contains functions responsible for custody and AMM functionalities."><link data-react-helmet="true" rel="shortcut icon" href="/doc/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://gondola-finance.github.io//doc/docs/developers/contracts/SwapUtils"><link data-react-helmet="true" rel="alternate" href="https://gondola-finance.github.io//doc/docs/developers/contracts/SwapUtils" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://gondola-finance.github.io//doc/docs/developers/contracts/SwapUtils" hreflang="x-default"><link rel="stylesheet" href="/doc/assets/css/styles.cb95ebef.css">
<link rel="preload" href="/doc/assets/js/styles.4985c453.js" as="script">
<link rel="preload" href="/doc/assets/js/runtime~main.6bfc457f.js" as="script">
<link rel="preload" href="/doc/assets/js/main.e25bbbe9.js" as="script">
<link rel="preload" href="/doc/assets/js/1.7249b642.js" as="script">
<link rel="preload" href="/doc/assets/js/2.b213bdc1.js" as="script">
<link rel="preload" href="/doc/assets/js/3.17723ab2.js" as="script">
<link rel="preload" href="/doc/assets/js/1be78505.623f70f0.js" as="script">
<link rel="preload" href="/doc/assets/js/41.1e1a38c9.js" as="script">
<link rel="preload" href="/doc/assets/js/935f2afb.9ff0a8fe.js" as="script">
<link rel="preload" href="/doc/assets/js/17896441.8152341f.js" as="script">
<link rel="preload" href="/doc/assets/js/6472f5a5.eb6e2f14.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#main" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle" type="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/doc/"><img src="/doc/img/logo.webp" alt="Gondola.finance Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/doc/img/logo.webp" alt="Gondola.finance Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><strong class="navbar__title">Gondola Finance</strong></a><a class="navbar__item navbar__link" href="/doc/docs/getting-started/introduction">Getting started</a><a class="navbar__item navbar__link navbar__link--active" href="/doc/docs/developers/introduction">Developers</a></div><div class="navbar__items navbar__items--right"></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/doc/"><img src="/doc/img/logo.webp" alt="Gondola.finance Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/doc/img/logo.webp" alt="Gondola.finance Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><strong class="navbar__title">Gondola Finance</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/doc/docs/getting-started/introduction">Getting started</a></li><li class="menu__list-item"><a class="menu__link navbar__link--active" href="/doc/docs/developers/introduction">Developers</a></li></ul></div></div></div></nav><div class="main-wrapper docs-wrapper doc-page"><div class="docPage_31aa"><div class="docSidebarContainer_3Kbt" role="complementary"><div class="sidebar_15mo"><div class="menu menu--responsive thin-scrollbar menu_Bmed"><button aria-label="Open menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_fgN0" width="24" height="24" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/doc/docs/developers/introduction">Table of contents</a></li><li class="menu__list-item"><a class="menu__link" href="/doc/docs/developers/deployed-contracts">Deployed contracts</a></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Smart Contracts</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/doc/docs/developers/contracts/GondolaToken">GondolaToken</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/doc/docs/developers/contracts/IMigratorChef">IMigratorChef</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/doc/docs/developers/contracts/LPToken">LPToken</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/doc/docs/developers/contracts/MasterChef">MasterChef</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/doc/docs/developers/contracts/MathUtils">MathUtils</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/doc/docs/developers/contracts/OwnerPausableUpgradeable">OwnerPausableUpgradeable</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/doc/docs/developers/contracts/StakeableTokenWrapper">StakeableTokenWrapper</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/doc/docs/developers/contracts/Swap">Swap</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/doc/docs/developers/contracts/SwapDeployer">SwapDeployer</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/doc/docs/developers/contracts/SwapFlashLoan">SwapFlashLoan</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/doc/docs/developers/contracts/SwapUtils">SwapUtils</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/doc/docs/developers/contracts/TimeLock">TimeLock</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">VirtualSwap</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/doc/docs/developers/contracts/VirtualSwap/Bridge">Bridge</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/doc/docs/developers/contracts/VirtualSwap/Proxy">Proxy</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/doc/docs/developers/contracts/VirtualSwap/SynthSwapper">SynthSwapper</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/doc/docs/developers/contracts/VirtualSwap/Target">Target</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">helper</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/doc/docs/developers/contracts/helper/FlashLoanBorrowerExample">FlashLoanBorrowerExample</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/doc/docs/developers/contracts/helper/GenericERC20">GenericERC20</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">test</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/doc/docs/developers/contracts/helper/test/TestSwapReturnValues">TestSwapReturnValues</a></li></ul></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">interfaces</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/doc/docs/developers/contracts/interfaces/IAllowlist">IAllowlist</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/doc/docs/developers/contracts/interfaces/IFlashLoanReceiver">IFlashLoanReceiver</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/doc/docs/developers/contracts/interfaces/ISwap">ISwap</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/doc/docs/developers/contracts/interfaces/ISwapFlashLoan">ISwapFlashLoan</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/doc/docs/developers/contracts/interfaces/ISwapGuarded">ISwapGuarded</a></li></ul></li></ul></li></ul></div></div></div><main class="docMainContainer_3ufF"><div class="container padding-vert--lg docItemWrapper_3FMP"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><header><h1 class="docTitle_3a4h">SwapUtils</h1></header><div class="markdown"><p>A library to be used within Swap.sol. Contains functions responsible for custody and AMM functionalities.</p><p>Contracts relying on this library must initialize SwapUtils.Swap struct then use this library
for SwapUtils.Swap struct. Note that this library contains both functions called by users and admins.
Admin functions should be protected within contracts using this library.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="functions"></a>Functions<a class="hash-link" href="#functions" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="geta"></a>getA<a class="hash-link" href="#geta" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly solidity"><div tabindex="0" class="prism-code language-solidity codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">  function getA(</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    struct SwapUtils.Swap self</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  ) external returns (uint256)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>Return A, the amplification coefficient <em> n </em> (n - 1)</p><p>See the StableSwap paper for details</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="parameters"></a>Parameters:<a class="hash-link" href="#parameters" title="Direct link to heading">#</a></h4><table><thead><tr><th align="left">Name</th><th align="left">Type</th><th align="left">Description</th></tr></thead><tbody><tr><td align="left"><code>self</code></td><td align="left">struct SwapUtils.Swap</td><td align="left">Swap struct to read from</td></tr></tbody></table><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="return-values"></a>Return Values:<a class="hash-link" href="#return-values" title="Direct link to heading">#</a></h4><table><thead><tr><th align="left">Name</th><th align="left">Type</th><th align="left">Description</th></tr></thead><tbody><tr><td align="left"><code>A</code></td><td align="left">struct SwapUtils.Swap</td><td align="left">parameter</td></tr></tbody></table><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="_geta"></a>_getA<a class="hash-link" href="#_geta" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly solidity"><div tabindex="0" class="prism-code language-solidity codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">  function _getA(</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    struct SwapUtils.Swap self</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  ) internal returns (uint256)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>Return A, the amplification coefficient <em> n </em> (n - 1)</p><p>See the StableSwap paper for details</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="parameters-1"></a>Parameters:<a class="hash-link" href="#parameters-1" title="Direct link to heading">#</a></h4><table><thead><tr><th align="left">Name</th><th align="left">Type</th><th align="left">Description</th></tr></thead><tbody><tr><td align="left"><code>self</code></td><td align="left">struct SwapUtils.Swap</td><td align="left">Swap struct to read from</td></tr></tbody></table><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="return-values-1"></a>Return Values:<a class="hash-link" href="#return-values-1" title="Direct link to heading">#</a></h4><table><thead><tr><th align="left">Name</th><th align="left">Type</th><th align="left">Description</th></tr></thead><tbody><tr><td align="left"><code>A</code></td><td align="left">struct SwapUtils.Swap</td><td align="left">parameter</td></tr></tbody></table><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="getaprecise"></a>getAPrecise<a class="hash-link" href="#getaprecise" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly solidity"><div tabindex="0" class="prism-code language-solidity codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">  function getAPrecise(</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    struct SwapUtils.Swap self</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  ) external returns (uint256)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>Return A in its raw precision</p><p>See the StableSwap paper for details</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="parameters-2"></a>Parameters:<a class="hash-link" href="#parameters-2" title="Direct link to heading">#</a></h4><table><thead><tr><th align="left">Name</th><th align="left">Type</th><th align="left">Description</th></tr></thead><tbody><tr><td align="left"><code>self</code></td><td align="left">struct SwapUtils.Swap</td><td align="left">Swap struct to read from</td></tr></tbody></table><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="return-values-2"></a>Return Values:<a class="hash-link" href="#return-values-2" title="Direct link to heading">#</a></h4><table><thead><tr><th align="left">Name</th><th align="left">Type</th><th align="left">Description</th></tr></thead><tbody><tr><td align="left"><code>A</code></td><td align="left">struct SwapUtils.Swap</td><td align="left">parameter in its raw precision form</td></tr></tbody></table><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="_getaprecise"></a>_getAPrecise<a class="hash-link" href="#_getaprecise" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly solidity"><div tabindex="0" class="prism-code language-solidity codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">  function _getAPrecise(</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    struct SwapUtils.Swap self</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  ) internal returns (uint256)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>Calculates and returns A based on the ramp settings</p><p>See the StableSwap paper for details</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="parameters-3"></a>Parameters:<a class="hash-link" href="#parameters-3" title="Direct link to heading">#</a></h4><table><thead><tr><th align="left">Name</th><th align="left">Type</th><th align="left">Description</th></tr></thead><tbody><tr><td align="left"><code>self</code></td><td align="left">struct SwapUtils.Swap</td><td align="left">Swap struct to read from</td></tr></tbody></table><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="return-values-3"></a>Return Values:<a class="hash-link" href="#return-values-3" title="Direct link to heading">#</a></h4><table><thead><tr><th align="left">Name</th><th align="left">Type</th><th align="left">Description</th></tr></thead><tbody><tr><td align="left"><code>A</code></td><td align="left">struct SwapUtils.Swap</td><td align="left">parameter in its raw precision form</td></tr></tbody></table><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="getdeposittimestamp"></a>getDepositTimestamp<a class="hash-link" href="#getdeposittimestamp" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly solidity"><div tabindex="0" class="prism-code language-solidity codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">  function getDepositTimestamp(</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    struct SwapUtils.Swap self</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  ) external returns (uint256)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>Retrieves the timestamp of last deposit made by the given address</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="parameters-4"></a>Parameters:<a class="hash-link" href="#parameters-4" title="Direct link to heading">#</a></h4><table><thead><tr><th align="left">Name</th><th align="left">Type</th><th align="left">Description</th></tr></thead><tbody><tr><td align="left"><code>self</code></td><td align="left">struct SwapUtils.Swap</td><td align="left">Swap struct to read from</td></tr></tbody></table><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="return-values-4"></a>Return Values:<a class="hash-link" href="#return-values-4" title="Direct link to heading">#</a></h4><table><thead><tr><th align="left">Name</th><th align="left">Type</th><th align="left">Description</th></tr></thead><tbody><tr><td align="left"><code>timestamp</code></td><td align="left">struct SwapUtils.Swap</td><td align="left">of last deposit</td></tr></tbody></table><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="calculatewithdrawonetoken"></a>calculateWithdrawOneToken<a class="hash-link" href="#calculatewithdrawonetoken" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly solidity"><div tabindex="0" class="prism-code language-solidity codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">  function calculateWithdrawOneToken(</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    struct SwapUtils.Swap account,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    address tokenAmount,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    uint256 tokenIndex,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    uint8 self</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  ) public returns (uint256, uint256)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>Calculate the dy, the amount of selected token that user receives and
the fee of withdrawing in one token</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="parameters-5"></a>Parameters:<a class="hash-link" href="#parameters-5" title="Direct link to heading">#</a></h4><table><thead><tr><th align="left">Name</th><th align="left">Type</th><th align="left">Description</th></tr></thead><tbody><tr><td align="left"><code>account</code></td><td align="left">struct SwapUtils.Swap</td><td align="left">the address that is withdrawing</td></tr><tr><td align="left"><code>tokenAmount</code></td><td align="left">address</td><td align="left">the amount to withdraw in the pool&#x27;s precision</td></tr><tr><td align="left"><code>tokenIndex</code></td><td align="left">uint256</td><td align="left">which token will be withdrawn</td></tr><tr><td align="left"><code>self</code></td><td align="left">uint8</td><td align="left">Swap struct to read from</td></tr></tbody></table><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="return-values-5"></a>Return Values:<a class="hash-link" href="#return-values-5" title="Direct link to heading">#</a></h4><table><thead><tr><th align="left">Name</th><th align="left">Type</th><th align="left">Description</th></tr></thead><tbody><tr><td align="left"><code>the</code></td><td align="left">struct SwapUtils.Swap</td><td align="left">amount of token user will receive and the associated swap fee</td></tr></tbody></table><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="calculatewithdrawonetokendy"></a>calculateWithdrawOneTokenDY<a class="hash-link" href="#calculatewithdrawonetokendy" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly solidity"><div tabindex="0" class="prism-code language-solidity codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">  function calculateWithdrawOneTokenDY(</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    struct SwapUtils.Swap self,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    uint8 tokenIndex,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    uint256 tokenAmount</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  ) internal returns (uint256, uint256)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>Calculate the dy of withdrawing in one token</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="parameters-6"></a>Parameters:<a class="hash-link" href="#parameters-6" title="Direct link to heading">#</a></h4><table><thead><tr><th align="left">Name</th><th align="left">Type</th><th align="left">Description</th></tr></thead><tbody><tr><td align="left"><code>self</code></td><td align="left">struct SwapUtils.Swap</td><td align="left">Swap struct to read from</td></tr><tr><td align="left"><code>tokenIndex</code></td><td align="left">uint8</td><td align="left">which token will be withdrawn</td></tr><tr><td align="left"><code>tokenAmount</code></td><td align="left">uint256</td><td align="left">the amount to withdraw in the pools precision</td></tr></tbody></table><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="return-values-6"></a>Return Values:<a class="hash-link" href="#return-values-6" title="Direct link to heading">#</a></h4><table><thead><tr><th align="left">Name</th><th align="left">Type</th><th align="left">Description</th></tr></thead><tbody><tr><td align="left"><code>the</code></td><td align="left">struct SwapUtils.Swap</td><td align="left">d and the new y after withdrawing one token</td></tr></tbody></table><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="getyd"></a>getYD<a class="hash-link" href="#getyd" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly solidity"><div tabindex="0" class="prism-code language-solidity codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">  function getYD(</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    uint256 a,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    uint8 tokenIndex,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    uint256[] xp,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    uint256 d</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  ) internal returns (uint256)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>Calculate the price of a token in the pool with given
precision-adjusted balances and a particular D.</p><p>This is accomplished via solving the invariant iteratively.
See the StableSwap paper and Curve.fi implementation for further details.</p><p>x_1<strong>2 + x1 <em> (sum&#x27; - (A</em>n</strong>n - 1) <em> D / (A </em> n<strong>n)) = D </strong> (n + 1) / (n <strong> (2 <em> n) </em> prod&#x27; * A)
x_1</strong>2 + b<em>x_1 = c
x_1 = (x_1**2 + c) / (2</em>x_1 + b)</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="parameters-7"></a>Parameters:<a class="hash-link" href="#parameters-7" title="Direct link to heading">#</a></h4><table><thead><tr><th align="left">Name</th><th align="left">Type</th><th align="left">Description</th></tr></thead><tbody><tr><td align="left"><code>a</code></td><td align="left">uint256</td><td align="left">the amplification coefficient <em> n </em> (n - 1). See the StableSwap paper for details.</td></tr><tr><td align="left"><code>tokenIndex</code></td><td align="left">uint8</td><td align="left">Index of token we are calculating for.</td></tr><tr><td align="left"><code>xp</code></td><td align="left">uint256[]</td><td align="left">a precision-adjusted set of pool balances. Array should be</td></tr></tbody></table><p>the same cardinality as the pool.
|<code>d</code> | uint256 | the stableswap invariant</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="return-values-7"></a>Return Values:<a class="hash-link" href="#return-values-7" title="Direct link to heading">#</a></h4><table><thead><tr><th align="left">Name</th><th align="left">Type</th><th align="left">Description</th></tr></thead><tbody><tr><td align="left"><code>the</code></td><td align="left">uint256</td><td align="left">price of the token, in the same precision as in xp</td></tr></tbody></table><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="getd"></a>getD<a class="hash-link" href="#getd" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly solidity"><div tabindex="0" class="prism-code language-solidity codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">  function getD(</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    uint256[] xp,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    uint256 a</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  ) internal returns (uint256)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>Get D, the StableSwap invariant, based on a set of balances and a particular A.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="parameters-8"></a>Parameters:<a class="hash-link" href="#parameters-8" title="Direct link to heading">#</a></h4><table><thead><tr><th align="left">Name</th><th align="left">Type</th><th align="left">Description</th></tr></thead><tbody><tr><td align="left"><code>xp</code></td><td align="left">uint256[]</td><td align="left">a precision-adjusted set of pool balances. Array should be the same cardinality</td></tr></tbody></table><p>as the pool.
|<code>a</code> | uint256 | the amplification coefficient <em> n </em> (n - 1) in A_PRECISION.
See the StableSwap paper for details</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="return-values-8"></a>Return Values:<a class="hash-link" href="#return-values-8" title="Direct link to heading">#</a></h4><table><thead><tr><th align="left">Name</th><th align="left">Type</th><th align="left">Description</th></tr></thead><tbody><tr><td align="left"><code>the</code></td><td align="left">uint256[]</td><td align="left">invariant, at the precision of the pool</td></tr></tbody></table><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="getd-1"></a>getD<a class="hash-link" href="#getd-1" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly solidity"><div tabindex="0" class="prism-code language-solidity codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">  function getD(</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    struct SwapUtils.Swap self</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  ) internal returns (uint256)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>Get D, the StableSwap invariant, based on self Swap struct</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="parameters-9"></a>Parameters:<a class="hash-link" href="#parameters-9" title="Direct link to heading">#</a></h4><table><thead><tr><th align="left">Name</th><th align="left">Type</th><th align="left">Description</th></tr></thead><tbody><tr><td align="left"><code>self</code></td><td align="left">struct SwapUtils.Swap</td><td align="left">Swap struct to read from</td></tr></tbody></table><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="return-values-9"></a>Return Values:<a class="hash-link" href="#return-values-9" title="Direct link to heading">#</a></h4><table><thead><tr><th align="left">Name</th><th align="left">Type</th><th align="left">Description</th></tr></thead><tbody><tr><td align="left"><code>The</code></td><td align="left">struct SwapUtils.Swap</td><td align="left">invariant, at the precision of the pool</td></tr></tbody></table><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="_xp"></a>_xp<a class="hash-link" href="#_xp" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly solidity"><div tabindex="0" class="prism-code language-solidity codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">  function _xp(</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    uint256[] balances,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    uint256[] precisionMultipliers</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  ) internal returns (uint256[])</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>Given a set of balances and precision multipliers, return the
precision-adjusted balances.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="parameters-10"></a>Parameters:<a class="hash-link" href="#parameters-10" title="Direct link to heading">#</a></h4><table><thead><tr><th align="left">Name</th><th align="left">Type</th><th align="left">Description</th></tr></thead><tbody><tr><td align="left"><code>balances</code></td><td align="left">uint256[]</td><td align="left">an array of token balances, in their native precisions.</td></tr></tbody></table><p>These should generally correspond with pooled tokens.</p><p>|<code>precisionMultipliers</code> | uint256[] | an array of multipliers, corresponding to
the amounts in the balances array. When multiplied together they
should yield amounts at the pool&#x27;s precision.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="return-values-10"></a>Return Values:<a class="hash-link" href="#return-values-10" title="Direct link to heading">#</a></h4><table><thead><tr><th align="left">Name</th><th align="left">Type</th><th align="left">Description</th></tr></thead><tbody><tr><td align="left"><code>an</code></td><td align="left">uint256[]</td><td align="left">array of amounts &quot;scaled&quot; to the pool&#x27;s precision</td></tr></tbody></table><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="_xp-1"></a>_xp<a class="hash-link" href="#_xp-1" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly solidity"><div tabindex="0" class="prism-code language-solidity codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">  function _xp(</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    struct SwapUtils.Swap self,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    uint256[] balances</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  ) internal returns (uint256[])</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>Return the precision-adjusted balances of all tokens in the pool</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="parameters-11"></a>Parameters:<a class="hash-link" href="#parameters-11" title="Direct link to heading">#</a></h4><table><thead><tr><th align="left">Name</th><th align="left">Type</th><th align="left">Description</th></tr></thead><tbody><tr><td align="left"><code>self</code></td><td align="left">struct SwapUtils.Swap</td><td align="left">Swap struct to read from</td></tr><tr><td align="left"><code>balances</code></td><td align="left">uint256[]</td><td align="left">array of balances to scale</td></tr></tbody></table><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="return-values-11"></a>Return Values:<a class="hash-link" href="#return-values-11" title="Direct link to heading">#</a></h4><table><thead><tr><th align="left">Name</th><th align="left">Type</th><th align="left">Description</th></tr></thead><tbody><tr><td align="left"><code>balances</code></td><td align="left">struct SwapUtils.Swap</td><td align="left">array &quot;scaled&quot; to the pool&#x27;s precision, allowing</td></tr></tbody></table><p>them to be more easily compared.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="_xp-2"></a>_xp<a class="hash-link" href="#_xp-2" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly solidity"><div tabindex="0" class="prism-code language-solidity codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">  function _xp(</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    struct SwapUtils.Swap self</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  ) internal returns (uint256[])</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>Return the precision-adjusted balances of all tokens in the pool</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="parameters-12"></a>Parameters:<a class="hash-link" href="#parameters-12" title="Direct link to heading">#</a></h4><table><thead><tr><th align="left">Name</th><th align="left">Type</th><th align="left">Description</th></tr></thead><tbody><tr><td align="left"><code>self</code></td><td align="left">struct SwapUtils.Swap</td><td align="left">Swap struct to read from</td></tr></tbody></table><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="return-values-12"></a>Return Values:<a class="hash-link" href="#return-values-12" title="Direct link to heading">#</a></h4><table><thead><tr><th align="left">Name</th><th align="left">Type</th><th align="left">Description</th></tr></thead><tbody><tr><td align="left"><code>the</code></td><td align="left">struct SwapUtils.Swap</td><td align="left">pool balances &quot;scaled&quot; to the pool&#x27;s precision, allowing</td></tr></tbody></table><p>them to be more easily compared.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="getvirtualprice"></a>getVirtualPrice<a class="hash-link" href="#getvirtualprice" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly solidity"><div tabindex="0" class="prism-code language-solidity codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">  function getVirtualPrice(</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    struct SwapUtils.Swap self</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  ) external returns (uint256)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>Get the virtual price, to help calculate profit</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="parameters-13"></a>Parameters:<a class="hash-link" href="#parameters-13" title="Direct link to heading">#</a></h4><table><thead><tr><th align="left">Name</th><th align="left">Type</th><th align="left">Description</th></tr></thead><tbody><tr><td align="left"><code>self</code></td><td align="left">struct SwapUtils.Swap</td><td align="left">Swap struct to read from</td></tr></tbody></table><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="return-values-13"></a>Return Values:<a class="hash-link" href="#return-values-13" title="Direct link to heading">#</a></h4><table><thead><tr><th align="left">Name</th><th align="left">Type</th><th align="left">Description</th></tr></thead><tbody><tr><td align="left"><code>the</code></td><td align="left">struct SwapUtils.Swap</td><td align="left">virtual price, scaled to precision of POOL_PRECISION_DECIMALS</td></tr></tbody></table><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="gety"></a>getY<a class="hash-link" href="#gety" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly solidity"><div tabindex="0" class="prism-code language-solidity codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">  function getY(</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    struct SwapUtils.Swap self,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    uint8 tokenIndexFrom,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    uint8 tokenIndexTo,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    uint256 x,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    uint256[] xp</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  ) internal returns (uint256)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>Calculate the new balances of the tokens given the indexes of the token
that is swapped from (FROM) and the token that is swapped to (TO).
This function is used as a helper function to calculate how much TO token
the user should receive on swap.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="parameters-14"></a>Parameters:<a class="hash-link" href="#parameters-14" title="Direct link to heading">#</a></h4><table><thead><tr><th align="left">Name</th><th align="left">Type</th><th align="left">Description</th></tr></thead><tbody><tr><td align="left"><code>self</code></td><td align="left">struct SwapUtils.Swap</td><td align="left">Swap struct to read from</td></tr><tr><td align="left"><code>tokenIndexFrom</code></td><td align="left">uint8</td><td align="left">index of FROM token</td></tr><tr><td align="left"><code>tokenIndexTo</code></td><td align="left">uint8</td><td align="left">index of TO token</td></tr><tr><td align="left"><code>x</code></td><td align="left">uint256</td><td align="left">the new total amount of FROM token</td></tr><tr><td align="left"><code>xp</code></td><td align="left">uint256[]</td><td align="left">balances of the tokens in the pool</td></tr></tbody></table><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="return-values-14"></a>Return Values:<a class="hash-link" href="#return-values-14" title="Direct link to heading">#</a></h4><table><thead><tr><th align="left">Name</th><th align="left">Type</th><th align="left">Description</th></tr></thead><tbody><tr><td align="left"><code>the</code></td><td align="left">struct SwapUtils.Swap</td><td align="left">amount of TO token that should remain in the pool</td></tr></tbody></table><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="calculateswap"></a>calculateSwap<a class="hash-link" href="#calculateswap" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly solidity"><div tabindex="0" class="prism-code language-solidity codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">  function calculateSwap(</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    struct SwapUtils.Swap self,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    uint8 tokenIndexFrom,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    uint8 tokenIndexTo,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    uint256 dx</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  ) external returns (uint256 dy)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>Externally calculates a swap between two tokens.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="parameters-15"></a>Parameters:<a class="hash-link" href="#parameters-15" title="Direct link to heading">#</a></h4><table><thead><tr><th align="left">Name</th><th align="left">Type</th><th align="left">Description</th></tr></thead><tbody><tr><td align="left"><code>self</code></td><td align="left">struct SwapUtils.Swap</td><td align="left">Swap struct to read from</td></tr><tr><td align="left"><code>tokenIndexFrom</code></td><td align="left">uint8</td><td align="left">the token to sell</td></tr><tr><td align="left"><code>tokenIndexTo</code></td><td align="left">uint8</td><td align="left">the token to buy</td></tr><tr><td align="left"><code>dx</code></td><td align="left">uint256</td><td align="left">the number of tokens to sell. If the token charges a fee on transfers,</td></tr></tbody></table><p>use the amount that gets transferred after the fee.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="return-values-15"></a>Return Values:<a class="hash-link" href="#return-values-15" title="Direct link to heading">#</a></h4><table><thead><tr><th align="left">Name</th><th align="left">Type</th><th align="left">Description</th></tr></thead><tbody><tr><td align="left"><code>dy</code></td><td align="left">struct SwapUtils.Swap</td><td align="left">the number of tokens the user will get</td></tr></tbody></table><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="_calculateswap"></a>_calculateSwap<a class="hash-link" href="#_calculateswap" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly solidity"><div tabindex="0" class="prism-code language-solidity codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">  function _calculateSwap(</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    struct SwapUtils.Swap self,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    uint8 tokenIndexFrom,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    uint8 tokenIndexTo,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    uint256 dx</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  ) internal returns (uint256 dy, uint256 dyFee)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>Internally calculates a swap between two tokens.</p><p>The caller is expected to transfer the actual amounts (dx and dy)
using the token contracts.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="parameters-16"></a>Parameters:<a class="hash-link" href="#parameters-16" title="Direct link to heading">#</a></h4><table><thead><tr><th align="left">Name</th><th align="left">Type</th><th align="left">Description</th></tr></thead><tbody><tr><td align="left"><code>self</code></td><td align="left">struct SwapUtils.Swap</td><td align="left">Swap struct to read from</td></tr><tr><td align="left"><code>tokenIndexFrom</code></td><td align="left">uint8</td><td align="left">the token to sell</td></tr><tr><td align="left"><code>tokenIndexTo</code></td><td align="left">uint8</td><td align="left">the token to buy</td></tr><tr><td align="left"><code>dx</code></td><td align="left">uint256</td><td align="left">the number of tokens to sell. If the token charges a fee on transfers,</td></tr></tbody></table><p>use the amount that gets transferred after the fee.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="return-values-16"></a>Return Values:<a class="hash-link" href="#return-values-16" title="Direct link to heading">#</a></h4><table><thead><tr><th align="left">Name</th><th align="left">Type</th><th align="left">Description</th></tr></thead><tbody><tr><td align="left"><code>dy</code></td><td align="left">struct SwapUtils.Swap</td><td align="left">the number of tokens the user will get</td></tr><tr><td align="left"><code>dyFee</code></td><td align="left">uint8</td><td align="left">the associated fee</td></tr></tbody></table><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="calculateremoveliquidity"></a>calculateRemoveLiquidity<a class="hash-link" href="#calculateremoveliquidity" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly solidity"><div tabindex="0" class="prism-code language-solidity codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">  function calculateRemoveLiquidity(</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    struct SwapUtils.Swap account,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    address amount</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  ) external returns (uint256[])</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>A simple method to calculate amount of each underlying
tokens that is returned upon burning given amount of
LP tokens</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="parameters-17"></a>Parameters:<a class="hash-link" href="#parameters-17" title="Direct link to heading">#</a></h4><table><thead><tr><th align="left">Name</th><th align="left">Type</th><th align="left">Description</th></tr></thead><tbody><tr><td align="left"><code>account</code></td><td align="left">struct SwapUtils.Swap</td><td align="left">the address that is removing liquidity. required for withdraw fee calculation</td></tr><tr><td align="left"><code>amount</code></td><td align="left">address</td><td align="left">the amount of LP tokens that would to be burned on</td></tr></tbody></table><p>withdrawal</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="return-values-17"></a>Return Values:<a class="hash-link" href="#return-values-17" title="Direct link to heading">#</a></h4><table><thead><tr><th align="left">Name</th><th align="left">Type</th><th align="left">Description</th></tr></thead><tbody><tr><td align="left"><code>array</code></td><td align="left">struct SwapUtils.Swap</td><td align="left">of amounts of tokens user will receive</td></tr></tbody></table><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="_calculateremoveliquidity"></a>_calculateRemoveLiquidity<a class="hash-link" href="#_calculateremoveliquidity" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly solidity"><div tabindex="0" class="prism-code language-solidity codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">  function _calculateRemoveLiquidity(</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  ) internal returns (uint256[])</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="calculatecurrentwithdrawfee"></a>calculateCurrentWithdrawFee<a class="hash-link" href="#calculatecurrentwithdrawfee" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly solidity"><div tabindex="0" class="prism-code language-solidity codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">  function calculateCurrentWithdrawFee(</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    struct SwapUtils.Swap user</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  ) public returns (uint256)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>Calculate the fee that is applied when the given user withdraws.
Withdraw fee decays linearly over 4 weeks.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="parameters-18"></a>Parameters:<a class="hash-link" href="#parameters-18" title="Direct link to heading">#</a></h4><table><thead><tr><th align="left">Name</th><th align="left">Type</th><th align="left">Description</th></tr></thead><tbody><tr><td align="left"><code>user</code></td><td align="left">struct SwapUtils.Swap</td><td align="left">address you want to calculate withdraw fee of</td></tr></tbody></table><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="return-values-18"></a>Return Values:<a class="hash-link" href="#return-values-18" title="Direct link to heading">#</a></h4><table><thead><tr><th align="left">Name</th><th align="left">Type</th><th align="left">Description</th></tr></thead><tbody><tr><td align="left"><code>current</code></td><td align="left">struct SwapUtils.Swap</td><td align="left">withdraw fee of the user</td></tr></tbody></table><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="calculatetokenamount"></a>calculateTokenAmount<a class="hash-link" href="#calculatetokenamount" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly solidity"><div tabindex="0" class="prism-code language-solidity codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">  function calculateTokenAmount(</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    struct SwapUtils.Swap self,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    address account,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    uint256[] amounts,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    bool deposit</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  ) external returns (uint256)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>A simple method to calculate prices from deposits or
withdrawals, excluding fees but including slippage. This is
helpful as an input into the various &quot;min&quot; parameters on calls
to fight front-running</p><p>This shouldn&#x27;t be used outside frontends for user estimates.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="parameters-19"></a>Parameters:<a class="hash-link" href="#parameters-19" title="Direct link to heading">#</a></h4><table><thead><tr><th align="left">Name</th><th align="left">Type</th><th align="left">Description</th></tr></thead><tbody><tr><td align="left"><code>self</code></td><td align="left">struct SwapUtils.Swap</td><td align="left">Swap struct to read from</td></tr><tr><td align="left"><code>account</code></td><td align="left">address</td><td align="left">address of the account depositing or withdrawing tokens</td></tr><tr><td align="left"><code>amounts</code></td><td align="left">uint256[]</td><td align="left">an array of token amounts to deposit or withdrawal,</td></tr></tbody></table><p>corresponding to pooledTokens. The amount should be in each
pooled token&#x27;s native precision. If a token charges a fee on transfers,
use the amount that gets transferred after the fee.
|<code>deposit</code> | bool | whether this is a deposit or a withdrawal</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="return-values-19"></a>Return Values:<a class="hash-link" href="#return-values-19" title="Direct link to heading">#</a></h4><table><thead><tr><th align="left">Name</th><th align="left">Type</th><th align="left">Description</th></tr></thead><tbody><tr><td align="left"><code>if</code></td><td align="left">struct SwapUtils.Swap</td><td align="left">deposit was true, total amount of lp token that will be minted and if</td></tr></tbody></table><p>deposit was false, total amount of lp token that will be burned</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="getadminbalance"></a>getAdminBalance<a class="hash-link" href="#getadminbalance" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly solidity"><div tabindex="0" class="prism-code language-solidity codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">  function getAdminBalance(</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    struct SwapUtils.Swap self,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    uint256 index</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  ) external returns (uint256)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>return accumulated amount of admin fees of the token with given index</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="parameters-20"></a>Parameters:<a class="hash-link" href="#parameters-20" title="Direct link to heading">#</a></h4><table><thead><tr><th align="left">Name</th><th align="left">Type</th><th align="left">Description</th></tr></thead><tbody><tr><td align="left"><code>self</code></td><td align="left">struct SwapUtils.Swap</td><td align="left">Swap struct to read from</td></tr><tr><td align="left"><code>index</code></td><td align="left">uint256</td><td align="left">Index of the pooled token</td></tr></tbody></table><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="return-values-20"></a>Return Values:<a class="hash-link" href="#return-values-20" title="Direct link to heading">#</a></h4><table><thead><tr><th align="left">Name</th><th align="left">Type</th><th align="left">Description</th></tr></thead><tbody><tr><td align="left"><code>admin</code></td><td align="left">struct SwapUtils.Swap</td><td align="left">balance in the token&#x27;s precision</td></tr></tbody></table><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="_feepertoken"></a>_feePerToken<a class="hash-link" href="#_feepertoken" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly solidity"><div tabindex="0" class="prism-code language-solidity codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">  function _feePerToken(</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    struct SwapUtils.Swap self</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  ) internal returns (uint256)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>internal helper function to calculate fee per token multiplier used in
swap fee calculations</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="parameters-21"></a>Parameters:<a class="hash-link" href="#parameters-21" title="Direct link to heading">#</a></h4><table><thead><tr><th align="left">Name</th><th align="left">Type</th><th align="left">Description</th></tr></thead><tbody><tr><td align="left"><code>self</code></td><td align="left">struct SwapUtils.Swap</td><td align="left">Swap struct to read from</td></tr></tbody></table><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="swap"></a>swap<a class="hash-link" href="#swap" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly solidity"><div tabindex="0" class="prism-code language-solidity codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">  function swap(</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    struct SwapUtils.Swap self,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    uint8 tokenIndexFrom,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    uint8 tokenIndexTo,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    uint256 dx,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    uint256 minDy</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  ) external returns (uint256)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>swap two tokens in the pool</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="parameters-22"></a>Parameters:<a class="hash-link" href="#parameters-22" title="Direct link to heading">#</a></h4><table><thead><tr><th align="left">Name</th><th align="left">Type</th><th align="left">Description</th></tr></thead><tbody><tr><td align="left"><code>self</code></td><td align="left">struct SwapUtils.Swap</td><td align="left">Swap struct to read from and write to</td></tr><tr><td align="left"><code>tokenIndexFrom</code></td><td align="left">uint8</td><td align="left">the token the user wants to sell</td></tr><tr><td align="left"><code>tokenIndexTo</code></td><td align="left">uint8</td><td align="left">the token the user wants to buy</td></tr><tr><td align="left"><code>dx</code></td><td align="left">uint256</td><td align="left">the amount of tokens the user wants to sell</td></tr><tr><td align="left"><code>minDy</code></td><td align="left">uint256</td><td align="left">the min amount the user would like to receive, or revert.</td></tr></tbody></table><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="return-values-21"></a>Return Values:<a class="hash-link" href="#return-values-21" title="Direct link to heading">#</a></h4><table><thead><tr><th align="left">Name</th><th align="left">Type</th><th align="left">Description</th></tr></thead><tbody><tr><td align="left"><code>amount</code></td><td align="left">struct SwapUtils.Swap</td><td align="left">of token user received on swap</td></tr></tbody></table><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="addliquidity"></a>addLiquidity<a class="hash-link" href="#addliquidity" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly solidity"><div tabindex="0" class="prism-code language-solidity codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">  function addLiquidity(</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    struct SwapUtils.Swap self,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    uint256[] amounts,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    uint256 minToMint</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  ) external returns (uint256)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>Add liquidity to the pool</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="parameters-23"></a>Parameters:<a class="hash-link" href="#parameters-23" title="Direct link to heading">#</a></h4><table><thead><tr><th align="left">Name</th><th align="left">Type</th><th align="left">Description</th></tr></thead><tbody><tr><td align="left"><code>self</code></td><td align="left">struct SwapUtils.Swap</td><td align="left">Swap struct to read from and write to</td></tr><tr><td align="left"><code>amounts</code></td><td align="left">uint256[]</td><td align="left">the amounts of each token to add, in their native precision</td></tr><tr><td align="left"><code>minToMint</code></td><td align="left">uint256</td><td align="left">the minimum LP tokens adding this amount of liquidity</td></tr></tbody></table><p>should mint, otherwise revert. Handy for front-running mitigation
allowed addresses. If the pool is not in the guarded launch phase, this parameter will be ignored.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="return-values-22"></a>Return Values:<a class="hash-link" href="#return-values-22" title="Direct link to heading">#</a></h4><table><thead><tr><th align="left">Name</th><th align="left">Type</th><th align="left">Description</th></tr></thead><tbody><tr><td align="left"><code>amount</code></td><td align="left">struct SwapUtils.Swap</td><td align="left">of LP token user received</td></tr></tbody></table><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="updateuserwithdrawfee"></a>updateUserWithdrawFee<a class="hash-link" href="#updateuserwithdrawfee" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly solidity"><div tabindex="0" class="prism-code language-solidity codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">  function updateUserWithdrawFee(</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    struct SwapUtils.Swap self,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    address user,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    uint256 toMint</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  ) external</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>Update the withdraw fee for <code>user</code>. If the user is currently
not providing liquidity in the pool, sets to default value. If not, recalculate
the starting withdraw fee based on the last deposit&#x27;s time &amp; amount relative
to the new deposit.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="parameters-24"></a>Parameters:<a class="hash-link" href="#parameters-24" title="Direct link to heading">#</a></h4><table><thead><tr><th align="left">Name</th><th align="left">Type</th><th align="left">Description</th></tr></thead><tbody><tr><td align="left"><code>self</code></td><td align="left">struct SwapUtils.Swap</td><td align="left">Swap struct to read from and write to</td></tr><tr><td align="left"><code>user</code></td><td align="left">address</td><td align="left">address of the user depositing tokens</td></tr><tr><td align="left"><code>toMint</code></td><td align="left">uint256</td><td align="left">amount of pool tokens to be minted</td></tr></tbody></table><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="_updateuserwithdrawfee"></a>_updateUserWithdrawFee<a class="hash-link" href="#_updateuserwithdrawfee" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly solidity"><div tabindex="0" class="prism-code language-solidity codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">  function _updateUserWithdrawFee(</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  ) internal</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="removeliquidity"></a>removeLiquidity<a class="hash-link" href="#removeliquidity" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly solidity"><div tabindex="0" class="prism-code language-solidity codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">  function removeLiquidity(</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    struct SwapUtils.Swap self,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    uint256 amount,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    uint256[] minAmounts</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  ) external returns (uint256[])</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>Burn LP tokens to remove liquidity from the pool.</p><p>Liquidity can always be removed, even when the pool is paused.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="parameters-25"></a>Parameters:<a class="hash-link" href="#parameters-25" title="Direct link to heading">#</a></h4><table><thead><tr><th align="left">Name</th><th align="left">Type</th><th align="left">Description</th></tr></thead><tbody><tr><td align="left"><code>self</code></td><td align="left">struct SwapUtils.Swap</td><td align="left">Swap struct to read from and write to</td></tr><tr><td align="left"><code>amount</code></td><td align="left">uint256</td><td align="left">the amount of LP tokens to burn</td></tr><tr><td align="left"><code>minAmounts</code></td><td align="left">uint256[]</td><td align="left">the minimum amounts of each token in the pool</td></tr></tbody></table><p>acceptable for this burn. Useful as a front-running mitigation</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="return-values-23"></a>Return Values:<a class="hash-link" href="#return-values-23" title="Direct link to heading">#</a></h4><table><thead><tr><th align="left">Name</th><th align="left">Type</th><th align="left">Description</th></tr></thead><tbody><tr><td align="left"><code>amounts</code></td><td align="left">struct SwapUtils.Swap</td><td align="left">of tokens the user received</td></tr></tbody></table><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="removeliquidityonetoken"></a>removeLiquidityOneToken<a class="hash-link" href="#removeliquidityonetoken" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly solidity"><div tabindex="0" class="prism-code language-solidity codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">  function removeLiquidityOneToken(</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    struct SwapUtils.Swap self,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    uint256 tokenAmount,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    uint8 tokenIndex,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    uint256 minAmount</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  ) external returns (uint256)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>Remove liquidity from the pool all in one token.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="parameters-26"></a>Parameters:<a class="hash-link" href="#parameters-26" title="Direct link to heading">#</a></h4><table><thead><tr><th align="left">Name</th><th align="left">Type</th><th align="left">Description</th></tr></thead><tbody><tr><td align="left"><code>self</code></td><td align="left">struct SwapUtils.Swap</td><td align="left">Swap struct to read from and write to</td></tr><tr><td align="left"><code>tokenAmount</code></td><td align="left">uint256</td><td align="left">the amount of the lp tokens to burn</td></tr><tr><td align="left"><code>tokenIndex</code></td><td align="left">uint8</td><td align="left">the index of the token you want to receive</td></tr><tr><td align="left"><code>minAmount</code></td><td align="left">uint256</td><td align="left">the minimum amount to withdraw, otherwise revert</td></tr></tbody></table><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="return-values-24"></a>Return Values:<a class="hash-link" href="#return-values-24" title="Direct link to heading">#</a></h4><table><thead><tr><th align="left">Name</th><th align="left">Type</th><th align="left">Description</th></tr></thead><tbody><tr><td align="left"><code>amount</code></td><td align="left">struct SwapUtils.Swap</td><td align="left">chosen token that user received</td></tr></tbody></table><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="removeliquidityimbalance"></a>removeLiquidityImbalance<a class="hash-link" href="#removeliquidityimbalance" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly solidity"><div tabindex="0" class="prism-code language-solidity codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">  function removeLiquidityImbalance(</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    struct SwapUtils.Swap self,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    uint256[] amounts,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    uint256 maxBurnAmount</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  ) public returns (uint256)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>Remove liquidity from the pool, weighted differently than the
pool&#x27;s current balances.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="parameters-27"></a>Parameters:<a class="hash-link" href="#parameters-27" title="Direct link to heading">#</a></h4><table><thead><tr><th align="left">Name</th><th align="left">Type</th><th align="left">Description</th></tr></thead><tbody><tr><td align="left"><code>self</code></td><td align="left">struct SwapUtils.Swap</td><td align="left">Swap struct to read from and write to</td></tr><tr><td align="left"><code>amounts</code></td><td align="left">uint256[]</td><td align="left">how much of each token to withdraw</td></tr><tr><td align="left"><code>maxBurnAmount</code></td><td align="left">uint256</td><td align="left">the max LP token provider is willing to pay to</td></tr></tbody></table><p>remove liquidity. Useful as a front-running mitigation.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="return-values-25"></a>Return Values:<a class="hash-link" href="#return-values-25" title="Direct link to heading">#</a></h4><table><thead><tr><th align="left">Name</th><th align="left">Type</th><th align="left">Description</th></tr></thead><tbody><tr><td align="left"><code>actual</code></td><td align="left">struct SwapUtils.Swap</td><td align="left">amount of LP tokens burned in the withdrawal</td></tr></tbody></table><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="withdrawadminfees"></a>withdrawAdminFees<a class="hash-link" href="#withdrawadminfees" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly solidity"><div tabindex="0" class="prism-code language-solidity codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">  function withdrawAdminFees(</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    struct SwapUtils.Swap self,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    address to</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  ) external</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>withdraw all admin fees to a given address</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="parameters-28"></a>Parameters:<a class="hash-link" href="#parameters-28" title="Direct link to heading">#</a></h4><table><thead><tr><th align="left">Name</th><th align="left">Type</th><th align="left">Description</th></tr></thead><tbody><tr><td align="left"><code>self</code></td><td align="left">struct SwapUtils.Swap</td><td align="left">Swap struct to withdraw fees from</td></tr><tr><td align="left"><code>to</code></td><td align="left">address</td><td align="left">Address to send the fees to</td></tr></tbody></table><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="setadminfee"></a>setAdminFee<a class="hash-link" href="#setadminfee" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly solidity"><div tabindex="0" class="prism-code language-solidity codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">  function setAdminFee(</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    struct SwapUtils.Swap self,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    uint256 newAdminFee</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  ) external</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>Sets the admin fee</p><p>adminFee cannot be higher than 100% of the swap fee</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="parameters-29"></a>Parameters:<a class="hash-link" href="#parameters-29" title="Direct link to heading">#</a></h4><table><thead><tr><th align="left">Name</th><th align="left">Type</th><th align="left">Description</th></tr></thead><tbody><tr><td align="left"><code>self</code></td><td align="left">struct SwapUtils.Swap</td><td align="left">Swap struct to update</td></tr><tr><td align="left"><code>newAdminFee</code></td><td align="left">uint256</td><td align="left">new admin fee to be applied on future transactions</td></tr></tbody></table><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="setswapfee"></a>setSwapFee<a class="hash-link" href="#setswapfee" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly solidity"><div tabindex="0" class="prism-code language-solidity codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">  function setSwapFee(</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    struct SwapUtils.Swap self,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    uint256 newSwapFee</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  ) external</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>update the swap fee</p><p>fee cannot be higher than 1% of each swap</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="parameters-30"></a>Parameters:<a class="hash-link" href="#parameters-30" title="Direct link to heading">#</a></h4><table><thead><tr><th align="left">Name</th><th align="left">Type</th><th align="left">Description</th></tr></thead><tbody><tr><td align="left"><code>self</code></td><td align="left">struct SwapUtils.Swap</td><td align="left">Swap struct to update</td></tr><tr><td align="left"><code>newSwapFee</code></td><td align="left">uint256</td><td align="left">new swap fee to be applied on future transactions</td></tr></tbody></table><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="setdefaultwithdrawfee"></a>setDefaultWithdrawFee<a class="hash-link" href="#setdefaultwithdrawfee" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly solidity"><div tabindex="0" class="prism-code language-solidity codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">  function setDefaultWithdrawFee(</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    struct SwapUtils.Swap self,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    uint256 newWithdrawFee</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  ) external</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>update the default withdraw fee. This also affects deposits made in the past as well.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="parameters-31"></a>Parameters:<a class="hash-link" href="#parameters-31" title="Direct link to heading">#</a></h4><table><thead><tr><th align="left">Name</th><th align="left">Type</th><th align="left">Description</th></tr></thead><tbody><tr><td align="left"><code>self</code></td><td align="left">struct SwapUtils.Swap</td><td align="left">Swap struct to update</td></tr><tr><td align="left"><code>newWithdrawFee</code></td><td align="left">uint256</td><td align="left">new withdraw fee to be applied</td></tr></tbody></table><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="rampa"></a>rampA<a class="hash-link" href="#rampa" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly solidity"><div tabindex="0" class="prism-code language-solidity codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">  function rampA(</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    struct SwapUtils.Swap self,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    uint256 futureA_,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    uint256 futureTime_</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  ) external</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>Start ramping up or down A parameter towards given futureA<em> and futureTime</em>
Checks if the change is too rapid, and commits the new A value only when it falls under
the limit range.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="parameters-32"></a>Parameters:<a class="hash-link" href="#parameters-32" title="Direct link to heading">#</a></h4><table><thead><tr><th align="left">Name</th><th align="left">Type</th><th align="left">Description</th></tr></thead><tbody><tr><td align="left"><code>self</code></td><td align="left">struct SwapUtils.Swap</td><td align="left">Swap struct to update</td></tr><tr><td align="left"><code>futureA_</code></td><td align="left">uint256</td><td align="left">the new A to ramp towards</td></tr><tr><td align="left"><code>futureTime_</code></td><td align="left">uint256</td><td align="left">timestamp when the new A should be reached</td></tr></tbody></table><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="stoprampa"></a>stopRampA<a class="hash-link" href="#stoprampa" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly solidity"><div tabindex="0" class="prism-code language-solidity codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">  function stopRampA(</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    struct SwapUtils.Swap self</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  ) external</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>Stops ramping A immediately. Once this function is called, rampA()
cannot be called for another 24 hours</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="parameters-33"></a>Parameters:<a class="hash-link" href="#parameters-33" title="Direct link to heading">#</a></h4><table><thead><tr><th align="left">Name</th><th align="left">Type</th><th align="left">Description</th></tr></thead><tbody><tr><td align="left"><code>self</code></td><td align="left">struct SwapUtils.Swap</td><td align="left">Swap struct to update</td></tr></tbody></table><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="events"></a>Events<a class="hash-link" href="#events" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="tokenswap"></a>TokenSwap<a class="hash-link" href="#tokenswap" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly solidity"><div tabindex="0" class="prism-code language-solidity codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">  event TokenSwap(</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  )</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="addliquidity-1"></a>AddLiquidity<a class="hash-link" href="#addliquidity-1" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly solidity"><div tabindex="0" class="prism-code language-solidity codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">  event AddLiquidity(</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  )</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="removeliquidity-1"></a>RemoveLiquidity<a class="hash-link" href="#removeliquidity-1" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly solidity"><div tabindex="0" class="prism-code language-solidity codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">  event RemoveLiquidity(</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  )</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="removeliquidityone"></a>RemoveLiquidityOne<a class="hash-link" href="#removeliquidityone" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly solidity"><div tabindex="0" class="prism-code language-solidity codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">  event RemoveLiquidityOne(</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  )</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="removeliquidityimbalance-1"></a>RemoveLiquidityImbalance<a class="hash-link" href="#removeliquidityimbalance-1" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly solidity"><div tabindex="0" class="prism-code language-solidity codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">  event RemoveLiquidityImbalance(</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  )</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="newadminfee"></a>NewAdminFee<a class="hash-link" href="#newadminfee" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly solidity"><div tabindex="0" class="prism-code language-solidity codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">  event NewAdminFee(</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  )</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="newswapfee"></a>NewSwapFee<a class="hash-link" href="#newswapfee" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly solidity"><div tabindex="0" class="prism-code language-solidity codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">  event NewSwapFee(</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  )</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="newwithdrawfee"></a>NewWithdrawFee<a class="hash-link" href="#newwithdrawfee" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly solidity"><div tabindex="0" class="prism-code language-solidity codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">  event NewWithdrawFee(</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  )</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="rampa-1"></a>RampA<a class="hash-link" href="#rampa-1" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly solidity"><div tabindex="0" class="prism-code language-solidity codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">  event RampA(</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  )</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="stoprampa-1"></a>StopRampA<a class="hash-link" href="#stoprampa-1" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly solidity"><div tabindex="0" class="prism-code language-solidity codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">  event StopRampA(</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  )</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/gondola-finance/doc/docs/developers/contracts/SwapUtils.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" role="img" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-label="Edit page"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/doc/docs/developers/contracts/SwapFlashLoan"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label"> SwapFlashLoan</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/doc/docs/developers/contracts/TimeLock"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">TimeLock </div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#functions" class="table-of-contents__link">Functions</a><ul><li><a href="#geta" class="table-of-contents__link">getA</a></li><li><a href="#_geta" class="table-of-contents__link">_getA</a></li><li><a href="#getaprecise" class="table-of-contents__link">getAPrecise</a></li><li><a href="#_getaprecise" class="table-of-contents__link">_getAPrecise</a></li><li><a href="#getdeposittimestamp" class="table-of-contents__link">getDepositTimestamp</a></li><li><a href="#calculatewithdrawonetoken" class="table-of-contents__link">calculateWithdrawOneToken</a></li><li><a href="#calculatewithdrawonetokendy" class="table-of-contents__link">calculateWithdrawOneTokenDY</a></li><li><a href="#getyd" class="table-of-contents__link">getYD</a></li><li><a href="#getd" class="table-of-contents__link">getD</a></li><li><a href="#getd-1" class="table-of-contents__link">getD</a></li><li><a href="#_xp" class="table-of-contents__link">_xp</a></li><li><a href="#_xp-1" class="table-of-contents__link">_xp</a></li><li><a href="#_xp-2" class="table-of-contents__link">_xp</a></li><li><a href="#getvirtualprice" class="table-of-contents__link">getVirtualPrice</a></li><li><a href="#gety" class="table-of-contents__link">getY</a></li><li><a href="#calculateswap" class="table-of-contents__link">calculateSwap</a></li><li><a href="#_calculateswap" class="table-of-contents__link">_calculateSwap</a></li><li><a href="#calculateremoveliquidity" class="table-of-contents__link">calculateRemoveLiquidity</a></li><li><a href="#_calculateremoveliquidity" class="table-of-contents__link">_calculateRemoveLiquidity</a></li><li><a href="#calculatecurrentwithdrawfee" class="table-of-contents__link">calculateCurrentWithdrawFee</a></li><li><a href="#calculatetokenamount" class="table-of-contents__link">calculateTokenAmount</a></li><li><a href="#getadminbalance" class="table-of-contents__link">getAdminBalance</a></li><li><a href="#_feepertoken" class="table-of-contents__link">_feePerToken</a></li><li><a href="#swap" class="table-of-contents__link">swap</a></li><li><a href="#addliquidity" class="table-of-contents__link">addLiquidity</a></li><li><a href="#updateuserwithdrawfee" class="table-of-contents__link">updateUserWithdrawFee</a></li><li><a href="#_updateuserwithdrawfee" class="table-of-contents__link">_updateUserWithdrawFee</a></li><li><a href="#removeliquidity" class="table-of-contents__link">removeLiquidity</a></li><li><a href="#removeliquidityonetoken" class="table-of-contents__link">removeLiquidityOneToken</a></li><li><a href="#removeliquidityimbalance" class="table-of-contents__link">removeLiquidityImbalance</a></li><li><a href="#withdrawadminfees" class="table-of-contents__link">withdrawAdminFees</a></li><li><a href="#setadminfee" class="table-of-contents__link">setAdminFee</a></li><li><a href="#setswapfee" class="table-of-contents__link">setSwapFee</a></li><li><a href="#setdefaultwithdrawfee" class="table-of-contents__link">setDefaultWithdrawFee</a></li><li><a href="#rampa" class="table-of-contents__link">rampA</a></li><li><a href="#stoprampa" class="table-of-contents__link">stopRampA</a></li></ul></li><li><a href="#events" class="table-of-contents__link">Events</a><ul><li><a href="#tokenswap" class="table-of-contents__link">TokenSwap</a></li><li><a href="#addliquidity-1" class="table-of-contents__link">AddLiquidity</a></li><li><a href="#removeliquidity-1" class="table-of-contents__link">RemoveLiquidity</a></li><li><a href="#removeliquidityone" class="table-of-contents__link">RemoveLiquidityOne</a></li><li><a href="#removeliquidityimbalance-1" class="table-of-contents__link">RemoveLiquidityImbalance</a></li><li><a href="#newadminfee" class="table-of-contents__link">NewAdminFee</a></li><li><a href="#newswapfee" class="table-of-contents__link">NewSwapFee</a></li><li><a href="#newwithdrawfee" class="table-of-contents__link">NewWithdrawFee</a></li><li><a href="#rampa-1" class="table-of-contents__link">RampA</a></li><li><a href="#stoprampa-1" class="table-of-contents__link">StopRampA</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Docs</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/doc/docs/getting-started/introduction">Getting started</a></li><li class="footer__item"><a class="footer__link-item" href="/doc/docs/developers/introduction">Developers</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Community</h4><ul class="footer__items"><li class="footer__item"><a href="https://discord.gg/7yf87Afh" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord</a></li><li class="footer__item"><a href="https://twitter.com/gondola_finance" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">More</h4><ul class="footer__items"><li class="footer__item"><a href="https://gondola.finance" target="_blank" rel="noopener noreferrer" class="footer__link-item">Website</a></li><li class="footer__item"><a href="https://app.gondola.finance" target="_blank" rel="noopener noreferrer" class="footer__link-item">Dapp</a></li><li class="footer__item"><a href="https://gondola-finance.medium.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Medium</a></li><li class="footer__item"><a href="https://github.com/gondola-finance" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright  2021 Gondola Finance.</div></div></div></footer></div>
<script src="/doc/assets/js/styles.4985c453.js"></script>
<script src="/doc/assets/js/runtime~main.6bfc457f.js"></script>
<script src="/doc/assets/js/main.e25bbbe9.js"></script>
<script src="/doc/assets/js/1.7249b642.js"></script>
<script src="/doc/assets/js/2.b213bdc1.js"></script>
<script src="/doc/assets/js/3.17723ab2.js"></script>
<script src="/doc/assets/js/1be78505.623f70f0.js"></script>
<script src="/doc/assets/js/41.1e1a38c9.js"></script>
<script src="/doc/assets/js/935f2afb.9ff0a8fe.js"></script>
<script src="/doc/assets/js/17896441.8152341f.js"></script>
<script src="/doc/assets/js/6472f5a5.eb6e2f14.js"></script>
</body>
</html>